<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHPND 검출현황</title>

    <link rel="stylesheet" href="ahpndresult.css" />
</head>
<body>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <div class="modal-chart">
        <div class="modal-chart-body">
          <div>
            <canvas id="myChart" width="550" height="320"></canvas>
          </div>
       </div>
    </div> 

    <div id="map" style="width:100%;height:100vh;"></div>

	<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=e1d481163c25821c1aafcee9d7a1fb65"></script>

</body>
</html>

<script>
    const ctx = document.getElementById('myChart');
  
    new Chart(ctx, {
      animationEnabled: true,
      type: 'line',
      data: {
        labels: ['2023-08', '2023-09', '2023-10', '2023-11', '2023-12', '2024-01', '2024-02', '2024-03', '2024-04', '2024-05', '2024-06', '2024-07'],
        datasets: [{
          label: 'My First Dataset',
          data: [4, 8, 6, 2, 1, 1, 0.5, 0.5, 1, 2, 3, 4],
          borderColor: 'rgba(240, 128, 128, 1)',
          borderWidth: 2
        }]
      },
      options: {
        responsive: false,      // 차크 크기 조정 시 해당 옵션 추가
        scales: {
          x: {
            beginAtZero: true
          },  
          y: {
            beginAtZero: true,
            suggestedMin: 0,
            suggestedMax: 10,
          }
        }
      }
    });

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        //center: new kakao.maps.LatLng(37.56756, 126.98147), // 지도의 중심좌표
    center: new kakao.maps.LatLng(36.589336, 126.3148374), // 지도의 중심좌표
        
        level: 13, // 지도의 확대 레벨
        mapTypeId : kakao.maps.MapTypeId.ROADMAP // 지도종류
    }; 

    // 지도를 생성한다 
    var map = new kakao.maps.Map(mapContainer, mapOption); 

    // 마커 이미지의 주소 - Red (위험)
    var markerImageUrl1 = "https://ghon2023.github.io/PreAHPND/marker-red.svg",
    markerImageSize1 = new kakao.maps.Size(30, 36),   // 마커 이미지의 크기  40, 42
    markerImageOptions1 = {
        offset : new kakao.maps.Point(25, 20)  // 마커 좌표에 일치시킬 이미지 안의 좌표
    };

    // 마커 이미지를 생성한다
    var markerImageRed = new kakao.maps.MarkerImage(markerImageUrl1, markerImageSize1, markerImageOptions1);

    // 지도에 마커를 생성하고 표시한다		
    var marker = new kakao.maps.Marker({
        position: new kakao.maps.LatLng(36.589336, 126.3148374), // 마커의 좌표 1  전남 무안군 망운면 송현리 1070-5   경계-1
        image : markerImageRed,    // 마커를 표시할 지도 객체
        map: map // 마커를 표시할 지도 객체
    });

    let body = document.querySelector('body');
    let chartBodyEl = document.querySelector(".modal-chart-body");

    kakao.maps.event.addListener(marker, 'click', function() {

       var modal = document.querySelector('.modal-chart');
       modal.style.display = 'block';
       body.style.overflow = 'hidden';

       // modal-chart-body 이외의 영역을 마우스 클릭 시 modal 종료
       document.addEventListener('mouseup', (e) => {
            if (!chartBodyEl.contains(e.target)) {
                modal.style.display = 'none';
                body.style.overflow = 'auto';
            }
        });
	    
       alert("TEST");		    
    });


</script>
